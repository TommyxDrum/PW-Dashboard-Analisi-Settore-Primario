/* accessibilitÃ  */
.visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* KPI box varianti */
.kpi-box.blue    { background: #eef6ff; border-left-color: var(--secondary-blue); }
.kpi-box.purple  { background: #f7f2ff; border-left-color: var(--purple); }
.kpi-box.info    { background: #e7fbff; border-left-color: var(--info-color); }
.kpi-box.risk    { background: #fff8e7; border-left-color: var(--warning-accessible); }

/* Gauge rischio */
.risk-gauge{ --risk:.37; --thumb:40px; --track-h:16px; --edge-offset:12px; position:relative; width:100%; padding:calc(var(--thumb)/2 + 8px) 20px; }
.risk-track{ height:var(--track-h); border-radius:9999px; background:linear-gradient(90deg, var(--risk-green) 0%, #86c443 30%, #ffc107 50%, var(--warning-accessible) 65%, var(--danger-red) 100%); position:relative; box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 2px 8px rgba(0,0,0,.1); }
.risk-thumb{ position:absolute; top:50%; left:calc(max(var(--edge-offset), min(calc(var(--risk)*100%), calc(100% - var(--edge-offset))))); transform:translate(-50%,-50%); width:var(--thumb); height:var(--thumb); border-radius:50%; background:#fff; display:grid; place-items:center; box-shadow:0 4px 12px rgba(0,0,0,.2), 0 0 0 4px rgba(255,255,255,.9); transition:all .3s ease; }
.risk-thumb:hover{ transform:translate(-50%,-50%) scale(1.1); }
.risk-value{ font-weight:700; font-size:1rem; color:#2f2f2f; line-height:1; }

/* Offcanvas / pulsanti */
.menu-toggle{ height:var(--control-h); width:var(--control-h); display:inline-flex; align-items:center; justify-content:center; background:#fff!important; color:#333!important; border:1px solid #dee2e6; box-shadow:0 2px 5px rgba(0,0,0,.06); padding:0; flex:0 0 auto; transition:all .2s ease; border-radius:.375rem; }
.menu-toggle:hover{ border-color:var(--primary-green); color:var(--primary-green)!important; }
.menu-toggle .bi{ font-size:1.5rem; line-height:1; }

.offcanvas-body .nav-link{ color:#495057; padding:.875rem 1.25rem; transition:all .2s ease; font-weight:500; border-radius:.5rem; margin-bottom:.375rem; }
.offcanvas-body .nav-link:hover,.offcanvas-body .nav-link:focus{ color:var(--primary-green); background-color:rgba(25,135,84,.08); transform:translateX(4px); }
.offcanvas-body .nav-link.active{ color:#fff!important; font-weight:600; box-shadow:0 4px 8px rgba(25,135,84,.3); }
.offcanvas-body .nav-link i{ font-size:1.125rem; }

.btn-detail-link{ background:#fff!important; color:#212529!important; font-weight:600; font-size:.875rem; padding:.5rem 1rem; box-shadow:0 2px 6px rgba(0,0,0,.08); transition:all .3s ease; border-width:2px!important; }
.btn-detail-link:hover,.btn-detail-link:focus{ box-shadow:0 4px 12px rgba(0,0,0,.15); transform:translateX(4px); }
.btn-detail-link i{ transition:transform .3s ease; }
.btn-detail-link:hover i{ transform:translateX(4px); }

/* Legenda stile Chart.js */
.chartjs-like-legend{ display:flex; justify-content:center; align-items:center; gap:2rem; padding:.75rem 0; background:rgba(0,0,0,.02); border-radius:.5rem; }
.chartjs-like-legend .item{ display:inline-flex; align-items:center; gap:.625rem; font-size:.875rem; color:#495057; font-weight:500; }
.chartjs-like-legend .swatch{ width:40px; height:14px; border-radius:4px; border:2px solid transparent; background-clip:padding-box; box-shadow:0 2px 4px rgba(0,0,0,.1); }
.legend-low .swatch{ border-color:var(--risk-green); background-color:rgba(25,135,84,.25); }
.legend-mid .swatch{ border-color:var(--risk-mid-accessible); background-color:rgba(224,148,0,.25); }
.legend-high .swatch{ border-color:var(--risk-red); background-color:rgba(220,53,69,.25); }

body > .row.g-4.mb-4 {
  margin-bottom: 0 !important;
}

body > .container-fluid.py-4 {
  padding-top: 0.75rem !important;
}

@media (max-width:768px){
  .section-header{ flex-direction:column; align-items:flex-start!important; gap:.5rem; }
  .btn-detail-link{ width:100%; justify-content:center; }
}