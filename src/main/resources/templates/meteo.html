<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Dashboard Agronomica • Monitoraggio Meteo Live</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet"/>
    <link rel="stylesheet" th:href="@{/css/common.css}"/>
    <link rel="stylesheet" th:href="@{/css/meteo.css}"/>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>

</head>
<body>

<header class="header-bar">
    <a href="/" class="btn btn-outline-secondary btn-back" aria-label="Torna alla Dashboard">
        <i class="bi bi-arrow-left"></i>
    </a>
    <h1 class="header-logo display-6 fs-4 mb-0">
        <i class="bi bi-cloud-sun-fill me-2" style="color: #ffd700"></i>
        Monitoraggio Meteo Live
    </h1>
    <div class="live-indicator ms-3">
        <span class="badge bg-success" id="liveBadge">
            <span class="pulse-dot"></span> LIVE
        </span>
        <small class="status-text ms-2">
            Aggiornato: <span id="lastUpdateTime">--:--:--</span>
        </small>
    </div>
</header>

<div class="container-fluid py-4 px-4">

    <!-- Card Meteo per Area -->
    <div class="row g-4 mb-4" id="weatherCards">
        <!-- Popolato dinamicamente via JS -->
    </div>

    <!-- Grafici Andamento -->
    <div class="row g-4">
        <div class="col-lg-6">
            <div class="dashboard-card p-4">
                <h3 class="h6 mb-3">
                    <i class="bi bi-thermometer-half"></i>
                    Temperatura in Tempo Reale
                </h3>
                <div class="chart-container" style="height: 300px;">
                    <canvas id="tempChart"></canvas>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="dashboard-card p-4">
                <h3 class="h6 mb-3">
                    <i class="bi bi-droplet-fill"></i>
                    Umidità in Tempo Reale
                </h3>
                <div class="chart-container" style="height: 300px;">
                    <canvas id="humidityChart"></canvas>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="dashboard-card p-4">
                <h3 class="h6 mb-3">
                    <i class="bi bi-wind"></i>
                    Vento in Tempo Reale
                </h3>
                <div class="chart-container" style="height: 300px;">
                    <canvas id="windChart"></canvas>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="dashboard-card p-4">
                <h3 class="h6 mb-3">
                    <i class="bi bi-brightness-high-fill"></i>
                    Radiazione Solare in Tempo Reale
                </h3>
                <div class="chart-container" style="height: 300px;">
                    <canvas id="solarChart"></canvas>
                </div>
            </div>
        </div>
    </div>

</div>
<footer class="text-center py-4 mt-5 border-top">
    <p class="text-muted small mb-0">
        &copy; <span th:text="${#temporals.year(#temporals.createNow())}">2025</span>
        AgrItalia S.p.A. | Dashboard Agronomica
    </p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/meteo.js}"></script>
</body>
</html>